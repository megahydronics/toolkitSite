import"../chunks/Bg9kRutz.js";import"../chunks/69_IOA4Y.js";import{av as we,b as Ie,h as ee,i as Pe,aw as Te,ax as ae,Y as Me,U as ie,a0 as le,ak as ce,af as de,an as ve,ay as fe,m as Ae,d as je,o as te,as as Le,g as qe,q as Ce,f as d,p as he,c as _,s as g,r as m,O as v,t as T,a as xe,R as ue,V as Ee,au as He,S as Ve}from"../chunks/Dwf0aE3m.js";import{c as p,a as r,t as k}from"../chunks/DAzwvns1.js";import{I as j,s as L,b as ne,e as Be,i as De}from"../chunks/DkiykGzS.js";import{i as Se}from"../chunks/BNGmT-Ny.js";import{o as Ue}from"../chunks/BhBr3-rn.js";import{s as w}from"../chunks/ChDmK0UQ.js";import{i as M}from"../chunks/BLSHl9IQ.js";import{h as me}from"../chunks/DvCNy0FT.js";import{b as Ge,a as A,c as _e,f as Oe,e as ge,m as Re}from"../chunks/l5udqaTR.js";import{l as q,s as C}from"../chunks/DNt3LT-Q.js";import{L as Ye}from"../chunks/Cz9Sy6vf.js";const se=0,J=1,oe=2;function Ze(i,e,t,l,s){ee&&Pe();var c=i,a=we(),o=Ce,f=ie,y,h,E,H=(a?le:ce)(void 0),G=(a?le:ce)(void 0),z=!1;function b(u,$){z=!0,$&&(de(O),ve(O),fe(o));try{u===J&&l&&(h?Ae(h):h=je(()=>l(c,H))),u!==se&&y&&te(y,()=>y=null),u!==J&&h&&te(h,()=>h=null),u!==oe&&E&&te(E,()=>E=null)}finally{$&&(fe(null),ve(null),de(null),Le())}}var O=Ie(()=>{if(f!==(f=e())){if(Te(f)){var u=f;z=!1,u.then($=>{u===f&&(ae(H,$),b(J,!0))},$=>{if(u===f)throw ae(G,$),b(oe,!0),G.v}),ee||Me(()=>{z||b(se,!0)})}else ae(H,f),b(J,!1);return()=>f=ie}});ee&&(c=qe)}function pe(i,e){const t=q(e,["children","$$slots","$$events","$$legacy"]);j(i,C({name:"triangle-alert"},()=>t,{iconNode:[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"}],["path",{d:"M12 9v4"}],["path",{d:"M12 17h.01"}]],children:(s,c)=>{var a=p(),o=d(a);L(o,e,"default",{}),r(s,a)},$$slots:{default:!0}}))}function Fe(i,e){const t=q(e,["children","$$slots","$$events","$$legacy"]);j(i,C({name:"hash"},()=>t,{iconNode:[["line",{x1:"4",x2:"20",y1:"9",y2:"9"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21"}]],children:(s,c)=>{var a=p(),o=d(a);L(o,e,"default",{}),r(s,a)},$$slots:{default:!0}}))}function Je(i,e){const t=q(e,["children","$$slots","$$events","$$legacy"]);j(i,C({name:"bluetooth"},()=>t,{iconNode:[["path",{d:"m7 7 10 10-5 5V2l5 5L7 17"}]],children:(s,c)=>{var a=p(),o=d(a);L(o,e,"default",{}),r(s,a)},$$slots:{default:!0}}))}function Ke(i,e){const t=q(e,["children","$$slots","$$events","$$legacy"]);j(i,C({name:"log-in"},()=>t,{iconNode:[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"}],["polyline",{points:"10 17 15 12 10 7"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12"}]],children:(s,c)=>{var a=p(),o=d(a);L(o,e,"default",{}),r(s,a)},$$slots:{default:!0}}))}function Qe(i,e){const t=q(e,["children","$$slots","$$events","$$legacy"]);j(i,C({name:"bluetooth-off"},()=>t,{iconNode:[["path",{d:"m17 17-5 5V12l-5 5"}],["path",{d:"m2 2 20 20"}],["path",{d:"M14.5 9.5 17 7l-5-5v4.5"}]],children:(s,c)=>{var a=p(),o=d(a);L(o,e,"default",{}),r(s,a)},$$slots:{default:!0}}))}function We(i,e){const t=q(e,["children","$$slots","$$events","$$legacy"]);j(i,C({name:"map-pin"},()=>t,{iconNode:[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0"}],["circle",{cx:"12",cy:"10",r:"3"}]],children:(s,c)=>{var a=p(),o=d(a);L(o,e,"default",{}),r(s,a)},$$slots:{default:!0}}))}var Xe=k('<img class="size-16 min-w-16 object-contain">'),ea=k("<!> <span>Please activate beacon</span>",1),aa=k("<!> <span> </span>",1),ta=k("<!> <span> </span>",1),na=k("<!> <span> </span>",1),sa=k("<!> <span> </span>",1),oa=k('<a class="h-full overflow-hidden hover:shadow-lg ring-1 ring-black/5 rounded-md flex flex-col" target="_blank"><div class="flex justify-between text-xs font-mono"><div class="flex items-center gap-1 py-1 px-2 rounded-br-md bg-gray-100"><!> </div> <div class="flex items-center gap-1 py-1 px-2 rounded-bl-md bg-gray-100"><!> </div></div> <div class="flex justify-between gap-2 p-3"><h3 class="font-medium text-pretty"> </h3> <!></div> <div class="mt-auto flex items-center text-sm px-2 pb-2 gap-2"><!></div></a>');function ra(i,e){he(e,!0);const t=ue(()=>e.tool.presence?me(e.tool.presence.to):null),l=ue(()=>{var n;return(n=e.tool.assignment)==null?void 0:n.assignee});var s=oa(),c=_(s),a=_(c),o=_(a);Fe(o,{size:"12"});var f=g(o);m(a);var y=g(a,2),h=_(y);{var E=n=>{Je(n,{size:"12"})},H=n=>{Qe(n,{size:"12"})};M(h,n=>{v(t)==="just now"?n(E):n(H,!1)})}var G=g(h);m(y),m(c);var z=g(c,2),b=_(z),O=_(b,!0);m(b);var u=g(b,2);{var $=n=>{var x=Xe();T(()=>{ne(x,"src",e.tool.image),ne(x,"alt",e.tool.about)}),r(n,x)};M(u,n=>{e.tool.image&&n($)})}m(z);var re=g(z,2),ye=_(re);{var be=n=>{var x=ea(),K=d(x);pe(K,{size:"16",class:"text-red-500"}),Ee(2),r(n,x)},$e=n=>{var x=p(),K=d(x);{var Ne=I=>{var V=aa(),R=d(V);We(R,{size:"16",class:"text-green-500"});var Y=g(R,2),Q=_(Y);m(Y),T(()=>w(Q,`Available ${v(t)??""}`)),r(I,V)},ke=I=>{var V=p(),R=d(V);{var Y=P=>{var B=ta(),Z=d(B);Ke(Z,{size:"16",class:"text-blue-500"});var F=g(Z,2),W=_(F);m(F),T(N=>w(W,`Auto check-in at ${N??""}`),[()=>Oe(e.tool.presence.from+_e)]),r(P,B)},Q=P=>{var B=p(),Z=d(B);{var F=N=>{var D=na(),S=d(D);Ye(S,{size:"16",class:"text-blue-500"});var U=g(S,2),X=_(U);m(U),T(ze=>w(X,`${v(l)??""} checked out ${ze??""}`),[()=>me(e.tool.assignment.from)]),r(N,D)},W=N=>{var D=sa(),S=d(D);pe(S,{size:"16",class:"text-red-500"});var U=g(S,2),X=_(U);m(U),T(()=>w(X,`Missing since ${v(t)??""}`)),r(N,D)};M(Z,N=>{v(l)?N(F):N(W,!1)},!0)}r(P,B)};M(R,P=>{v(t)==="just now"&&v(l)&&A.clock.now.getTime()-e.tool.assignment.from>_e/2?P(Y):P(Q,!1)},!0)}r(I,V)};M(K,I=>{v(t)==="just now"&&!v(l)?I(Ne):I(ke,!1)},!0)}r(n,x)};M(ye,n=>{v(t)?n($e,!1):n(be)})}m(re),m(s),T(n=>{ne(s,"href",n),w(f,` ${e.tool.tag??""}`),w(G,` ${e.tool.mac??""}`),w(O,e.tool.about)},[()=>Ge(e.tool.apId)]),r(i,s),xe()}var ia=k('<div class="grid gap-6 grid-cols-1 md:grid-cols-2 lg:grid-cols-3"></div>');function ba(i,e){he(e,!1),Ue(()=>{const c=setInterval(()=>{A.presence.present&&Ve(t,A.client.convex.query(ge.db.tool.getAll,{token:A.client.token}))},Re);return()=>clearInterval(c)});let t=He(A.client.convex.query(ge.db.tool.getAll,{token:A.client.token}));Se();var l=p(),s=d(l);Ze(s,()=>v(t),null,(c,a)=>{var o=ia();Be(o,5,()=>v(a),De,(f,y)=>{ra(f,{get tool(){return v(y)}})}),m(o),r(c,o)}),r(i,l),xe()}export{ba as component};
