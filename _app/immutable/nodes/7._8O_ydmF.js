import"../chunks/Bg9kRutz.js";import"../chunks/69_IOA4Y.js";import{av as we,b as Pe,h as ee,i as Ie,aw as Te,ax as ae,W as Ae,U as ve,_ as de,ak as fe,ae as me,an as _e,ay as ue,m as te,d as oe,o as ne,as as Me,g as Ce,q as Le,f as g,p as be,t as P,c as v,s as m,r as s,P as u,a as ye,R as pe,S as De}from"../chunks/CiAMSZcE.js";import{s as I}from"../chunks/DoeJ8Rz_.js";import{i as D}from"../chunks/CGcub1ny.js";import{I as E,s as H,b as Q,e as se,i as re}from"../chunks/C6-oBzN2.js";import{c as T,a as l,t as z}from"../chunks/CJ-HhBN5.js";import{i as qe}from"../chunks/B5IdvLdr.js";import{h as ge,a as Se}from"../chunks/BUmM0TcP.js";import{b as $e,c as he,f as je,a as xe,e as Ee,t as He}from"../chunks/TMJop5Bd.js";import{l as U,s as V}from"../chunks/DJczjzHP.js";import{L as Ue}from"../chunks/BTgBk06m.js";const le=0,O=1,ie=2;function Ve(d,e,r,p,n){ee&&Ie();var _=d,a=we(),t=Le,h=ve,x,B,$,A=(a?de:fe)(void 0),M=(a?de:fe)(void 0),f=!1;function i(c,b){f=!0,b&&(me(k),_e(k),ue(t));try{c===le&&r&&(x?te(x):x=oe(()=>r(_))),c===O&&p&&(B?te(B):B=oe(()=>p(_,A))),c===ie&&n&&($?te($):$=oe(()=>n(_,M))),c!==le&&x&&ne(x,()=>x=null),c!==O&&B&&ne(B,()=>B=null),c!==ie&&$&&ne($,()=>$=null)}finally{b&&(ue(null),_e(null),me(null),Me())}}var k=Pe(()=>{if(h!==(h=e())){if(Te(h)){var c=h;f=!1,c.then(b=>{c===h&&(ae(A,b),i(O,!0))},b=>{if(c===h)throw ae(M,b),i(ie,!0),M.v}),ee||Ae(()=>{f||i(le,!0)})}else ae(A,h),i(O,!1);return()=>h=ve}});ee&&(_=Ce)}function ke(d,e){const r=U(e,["children","$$slots","$$events","$$legacy"]);E(d,V({name:"bluetooth-off"},()=>r,{iconNode:[["path",{d:"m17 17-5 5V12l-5 5"}],["path",{d:"m2 2 20 20"}],["path",{d:"M14.5 9.5 17 7l-5-5v4.5"}]],children:(n,_)=>{var a=T(),t=g(a);H(t,e,"default",{}),l(n,a)},$$slots:{default:!0}}))}function ze(d,e){const r=U(e,["children","$$slots","$$events","$$legacy"]);E(d,V({name:"bluetooth"},()=>r,{iconNode:[["path",{d:"m7 7 10 10-5 5V2l5 5L7 17"}]],children:(n,_)=>{var a=T(),t=g(a);H(t,e,"default",{}),l(n,a)},$$slots:{default:!0}}))}function Be(d,e){const r=U(e,["children","$$slots","$$events","$$legacy"]);E(d,V({name:"hash"},()=>r,{iconNode:[["line",{x1:"4",x2:"20",y1:"9",y2:"9"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21"}]],children:(n,_)=>{var a=T(),t=g(a);H(t,e,"default",{}),l(n,a)},$$slots:{default:!0}}))}function Fe(d,e){const r=U(e,["children","$$slots","$$events","$$legacy"]);E(d,V({name:"log-in"},()=>r,{iconNode:[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"}],["polyline",{points:"10 17 15 12 10 7"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12"}]],children:(n,_)=>{var a=T(),t=g(a);H(t,e,"default",{}),l(n,a)},$$slots:{default:!0}}))}function Ge(d,e){const r=U(e,["children","$$slots","$$events","$$legacy"]);E(d,V({name:"map-pin"},()=>r,{iconNode:[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0"}],["circle",{cx:"12",cy:"10",r:"3"}]],children:(n,_)=>{var a=T(),t=g(a);H(t,e,"default",{}),l(n,a)},$$slots:{default:!0}}))}function Re(d,e){const r=U(e,["children","$$slots","$$events","$$legacy"]);E(d,V({name:"triangle-alert"},()=>r,{iconNode:[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"}],["path",{d:"M12 9v4"}],["path",{d:"M12 17h.01"}]],children:(n,_)=>{var a=T(),t=g(a);H(t,e,"default",{}),l(n,a)},$$slots:{default:!0}}))}var We=z('<img class="object-contain size-15 ml-auto">'),Ze=z("<!> <span> </span>",1),Je=z("<!> <span> </span>",1),Ke=z("<!> <span> </span>",1),Oe=z("<!> <span>Available</span>",1),Qe=z('<a class="h-full rounded-lg overflow-hidden hover:shadow-lg ring-1 ring-black/5 flex flex-col" target="_blank"><div class="border-gray-200 border-b flex items-center text-xs font-mono p-2 gap-1"><!> <span class="grid"> </span> <!> <span> </span></div> <div class="flex gap-2 p-3"><div class="flex flex-col mb-auto gap-y-2 gap-x-1.5"><h3 class="font-medium text-pretty"> </h3></div> <!></div> <div class="mt-auto flex items-center text-sm px-2 pb-2 gap-1.5"><!></div></a>');function Xe(d,e){be(e,!0);const r=pe(()=>ge(e.toolBeacon.presence.to)),p=pe(()=>{var o;return(o=e.toolBeacon.assignment)==null?void 0:o.assignee});var n=Qe();P(()=>Q(n,"href",$e(e.toolBeacon.apId)));var _=v(n),a=v(_);Be(a,{class:"size-3"});var t=m(a,2),h=v(t,!0);s(t);var x=m(t,2);{var B=o=>{ze(o,{class:"size-3 ml-auto"})},$=o=>{ke(o,{class:"size-3 ml-auto"})};D(x,o=>{u(r)==="just now"?o(B):o($,!1)})}var A=m(x,2),M=v(A,!0);s(A),s(_);var f=m(_,2),i=v(f),k=v(i),c=v(k,!0);s(k),s(i);var b=m(i,2);{var C=o=>{var y=We();P(()=>{Q(y,"src",e.toolBeacon.image),Q(y,"alt",e.toolBeacon.info)}),l(o,y)};D(b,o=>{e.toolBeacon.image&&o(C)})}s(f);var N=m(f,2),L=v(N);{var w=o=>{var y=Ze(),q=g(y);Re(q,{class:"size-3.5 mt-[2.5px] text-red-500"});var W=m(q,2),X=v(W);s(W),P(()=>I(X,`Missing since ${u(r)??""}`)),l(o,y)},F=o=>{var y=T(),q=g(y);{var W=S=>{var G=Je(),Z=g(G);Fe(Z,{class:"size-3.5 mt-[2.5px] text-blue-500"});var J=m(Z,2),Y=v(J);P(()=>I(Y,`Auto check-in at ${je(e.toolBeacon.presence.from+he)??""}`)),s(J),l(S,G)},X=S=>{var G=T(),Z=g(G);{var J=j=>{var R=Ke(),K=g(R);Ue(K,{class:"size-3.5 mt-[2.5px] text-blue-500"});var ce=m(K,2),Ne=v(ce);P(()=>I(Ne,`${u(p)??""} checked out ${ge(e.toolBeacon.assignment.from)??""}`)),s(ce),l(j,R)},Y=j=>{var R=Oe(),K=g(R);Ge(K,{class:"size-3.5 mt-[2.5px] text-green-500"}),De(2),l(j,R)};D(Z,j=>{u(p)?j(J):j(Y,!1)},!0)}l(S,G)};D(q,S=>{u(p)&&u(r)==="just now"&&Date.now()-e.toolBeacon.assignment.from>he/2?S(W):S(X,!1)},!0)}l(o,y)};D(L,o=>{e.toolBeacon.missing?o(w):o(F,!1)})}s(N),s(n),P(()=>{I(h,e.toolBeacon.tag),I(M,e.toolBeacon.mac),I(c,e.toolBeacon.info)}),l(d,n),ye()}var Ye=z('<div class="flex gap-1 items-center font-mono"><!> <a class="underline" target="_blank"> </a> <!> <span> </span></div>'),ea=z('<div class="mb-4 text-sm text-yellow-800 rounded-lg bg-yellow-100 py-4 px-4.5"><p></p> <div class="flex flex-col gap-1 mt-2 ml-2"></div></div>'),aa=z('<div class="flex gap-1 items-center font-mono"><!> <span> </span></div>'),ta=z('<div class="mb-4 text-sm text-yellow-800 rounded-lg bg-yellow-100 py-4 px-4.5"><p></p> <div class="flex flex-col gap-1 mt-2 ml-2"></div></div>'),oa=z('<!> <!> <div class="grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-3"></div>',1);function pa(d,e){be(e,!1);const r=xe.client.convex.query(Ee.db.beacon.getAll,{token:xe.client.token}),p=`Changes made on Asset Panda will take up to ${Se(He)} to propagate.`;qe();var n=T(),_=g(n);Ve(_,()=>r,null,(a,t)=>{var h=oa(),x=g(h);{var B=f=>{var i=ea(),k=v(i);k.textContent=`The following tools have linked beacons that were not detected. Please verify the beacon ID and ensure the
				beacon is activated and not damaged. ${p??""}`;var c=m(k,2);se(c,5,()=>u(t).tools,re,(b,C)=>{var N=Ye(),L=v(N);Be(L,{class:"size-3"});var w=m(L,2);P(()=>Q(w,"href",$e(u(C).apId)));var F=v(w,!0);s(w);var o=m(w,2);ke(o,{class:"size-3 ml-2"});var y=m(o,2),q=v(y,!0);s(y),s(N),P(()=>{I(F,u(C).tag),I(q,u(C).mac)}),l(b,N)}),s(c),s(i),l(f,i)};D(x,f=>{u(t).tools.length&&f(B)})}var $=m(x,2);{var A=f=>{var i=ta(),k=v(i);k.textContent=`The following beacons have been activated but are not linked to any tools. Please link the beacon by adding its
				ID to a Field Shared Tool on Asset Panda. ${p??""}`;var c=m(k,2);se(c,5,()=>u(t).beacons,re,(b,C)=>{var N=aa(),L=v(N);ze(L,{class:"size-3"});var w=m(L,2),F=v(w,!0);s(w),s(N),P(()=>I(F,u(C).mac)),l(b,N)}),s(c),s(i),l(f,i)};D($,f=>{u(t).beacons.length&&f(A)})}var M=m($,2);se(M,5,()=>u(t).toolBeacons,re,(f,i)=>{Xe(f,{get toolBeacon(){return u(i)}})}),s(M),l(a,h)}),l(d,n),ye()}export{pa as component};
