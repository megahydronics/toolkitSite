import"../chunks/Bg9kRutz.js";import"../chunks/69_IOA4Y.js";import{av as ke,b as we,h as Y,i as Ie,aw as Te,ax as ee,X as Pe,U as re,$ as ie,ak as le,af as ce,an as de,ay as ve,m as Me,d as Ae,o as ae,as as Le,g as je,q as qe,f as c,p as ge,c as u,s as _,r as m,O as p,t as P,a as he,R as fe,T as Ce}from"../chunks/DRdzsAZa.js";import{c as g,a as r,t as z}from"../chunks/BkM76rGT.js";import{I as A,s as L,b as te,e as De,i as Ee}from"../chunks/CPLO2SW9.js";import{i as He}from"../chunks/CuAnivQO.js";import{s as w}from"../chunks/Ctfbm0HW.js";import{i as M}from"../chunks/B1rkBnyu.js";import{h as me}from"../chunks/fb6osY8a.js";import{b as Be,c as ue,f as Ue,a as _e,e as Ve}from"../chunks/DxRnBbZr.js";import{l as j,s as q}from"../chunks/BJ_FvU9R.js";import{L as Ge}from"../chunks/592eGd4x.js";const se=0,F=1,ne=2;function Oe(i,e,s,l,n){Y&&Ie();var d=i,a=ke(),o=qe,v=re,y,h,C,D=(a?ie:le)(void 0),G=(a?ie:le)(void 0),k=!1;function $(f,b){k=!0,b&&(ce(O),de(O),ve(o));try{f===F&&l&&(h?Me(h):h=Ae(()=>l(d,D))),f!==se&&y&&ae(y,()=>y=null),f!==F&&h&&ae(h,()=>h=null),f!==ne&&C&&ae(C,()=>C=null)}finally{b&&(ve(null),de(null),ce(null),Le())}}var O=we(()=>{if(v!==(v=e())){if(Te(v)){var f=v;k=!1,f.then(b=>{f===v&&(ee(D,b),$(F,!0))},b=>{if(f===v)throw ee(G,b),$(ne,!0),G.v}),Y||Pe(()=>{k||$(se,!0)})}else ee(D,v),$(F,!1);return()=>v=re}});Y&&(d=je)}function pe(i,e){const s=j(e,["children","$$slots","$$events","$$legacy"]);A(i,q({name:"triangle-alert"},()=>s,{iconNode:[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"}],["path",{d:"M12 9v4"}],["path",{d:"M12 17h.01"}]],children:(n,d)=>{var a=g(),o=c(a);L(o,e,"default",{}),r(n,a)},$$slots:{default:!0}}))}function Re(i,e){const s=j(e,["children","$$slots","$$events","$$legacy"]);A(i,q({name:"hash"},()=>s,{iconNode:[["line",{x1:"4",x2:"20",y1:"9",y2:"9"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21"}]],children:(n,d)=>{var a=g(),o=c(a);L(o,e,"default",{}),r(n,a)},$$slots:{default:!0}}))}function Se(i,e){const s=j(e,["children","$$slots","$$events","$$legacy"]);A(i,q({name:"bluetooth"},()=>s,{iconNode:[["path",{d:"m7 7 10 10-5 5V2l5 5L7 17"}]],children:(n,d)=>{var a=g(),o=c(a);L(o,e,"default",{}),r(n,a)},$$slots:{default:!0}}))}function Xe(i,e){const s=j(e,["children","$$slots","$$events","$$legacy"]);A(i,q({name:"log-in"},()=>s,{iconNode:[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"}],["polyline",{points:"10 17 15 12 10 7"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12"}]],children:(n,d)=>{var a=g(),o=c(a);L(o,e,"default",{}),r(n,a)},$$slots:{default:!0}}))}function Ze(i,e){const s=j(e,["children","$$slots","$$events","$$legacy"]);A(i,q({name:"bluetooth-off"},()=>s,{iconNode:[["path",{d:"m17 17-5 5V12l-5 5"}],["path",{d:"m2 2 20 20"}],["path",{d:"M14.5 9.5 17 7l-5-5v4.5"}]],children:(n,d)=>{var a=g(),o=c(a);L(o,e,"default",{}),r(n,a)},$$slots:{default:!0}}))}function Fe(i,e){const s=j(e,["children","$$slots","$$events","$$legacy"]);A(i,q({name:"map-pin"},()=>s,{iconNode:[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0"}],["circle",{cx:"12",cy:"10",r:"3"}]],children:(n,d)=>{var a=g(),o=c(a);L(o,e,"default",{}),r(n,a)},$$slots:{default:!0}}))}var Je=z('<img class="size-16 min-w-16 object-contain">'),Ke=z("<!> <span>Never seen</span>",1),Qe=z("<!> <span> </span>",1),We=z("<!> <span> </span>",1),Ye=z("<!> <span> </span>",1),ea=z("<!> <span> </span>",1),aa=z('<a class="h-full overflow-hidden hover:shadow-lg ring-1 ring-black/5 rounded-md flex flex-col" target="_blank"><div class="flex justify-between text-xs font-mono"><div class="flex items-center gap-1 py-1 px-2 rounded-br-md bg-gray-100"><!> </div> <div class="flex items-center gap-1 py-1 px-2 rounded-bl-md bg-gray-100"><!> </div></div> <div class="flex justify-between gap-2 p-3"><h3 class="font-medium text-pretty"> </h3> <!></div> <div class="mt-auto flex items-center text-sm px-2 pb-2 gap-1.5"><!></div></a>');function ta(i,e){ge(e,!0);const s=fe(()=>e.tool.presence?me(e.tool.presence.to):"never"),l=fe(()=>{var t;return(t=e.tool.assignment)==null?void 0:t.assignee});var n=aa(),d=u(n),a=u(d),o=u(a);Re(o,{size:"12"});var v=_(o);m(a);var y=_(a,2),h=u(y);{var C=t=>{Se(t,{size:"12"})},D=t=>{Ze(t,{size:"12"})};M(h,t=>{p(s)==="just now"?t(C):t(D,!1)})}var G=_(h);m(y),m(d);var k=_(d,2),$=u(k),O=u($,!0);m($);var f=_($,2);{var b=t=>{var x=Je();P(()=>{te(x,"src",e.tool.image),te(x,"alt",e.tool.about)}),r(t,x)};M(f,t=>{e.tool.image&&t(b)})}m(k);var oe=_(k,2),xe=u(oe);{var ye=t=>{var x=Ke(),J=c(x);pe(J,{size:"14",class:"mt-[2.5px] text-red-500"}),Ce(2),r(t,x)},$e=t=>{var x=g(),J=c(x);{var be=I=>{var E=Qe(),R=c(E);pe(R,{size:"14",class:"mt-[2.5px] text-red-500"});var S=_(R,2),K=u(S);m(S),P(()=>w(K,`Missing since ${p(s)??""}`)),r(I,E)},Ne=I=>{var E=g(),R=c(E);{var S=T=>{var H=We(),X=c(H);Xe(X,{size:"14",class:"mt-[2.5px] text-blue-500"});var Z=_(X,2),Q=u(Z);m(Z),P(N=>w(Q,`Auto check-in at ${N??""}`),[()=>Ue(e.tool.presence.from+ue)]),r(T,H)},K=T=>{var H=g(),X=c(H);{var Z=N=>{var B=Ye(),U=c(B);Ge(U,{size:"14",class:"mt-[2.5px] text-blue-500"});var V=_(U,2),W=u(V);m(V),P(ze=>w(W,`${p(l)??""} checked out ${ze??""}`),[()=>me(e.tool.assignment.from)]),r(N,B)},Q=N=>{var B=ea(),U=c(B);Fe(U,{size:"14",class:"mt-[2.5px] text-green-500"});var V=_(U,2),W=u(V);m(V),P(()=>w(W,`Available ${p(s)??""}`)),r(N,B)};M(X,N=>{p(l)?N(Z):N(Q,!1)},!0)}r(T,H)};M(R,T=>{p(l)&&p(s)==="just now"&&Date.now()-e.tool.assignment.from>ue/2?T(S):T(K,!1)},!0)}r(I,E)};M(J,I=>{e.tool.missing?I(be):I(Ne,!1)},!0)}r(t,x)};M(xe,t=>{p(s)==="never"?t(ye):t($e,!1)})}m(oe),m(n),P(t=>{te(n,"href",t),w(v,` ${e.tool.tag??""}`),w(G,` ${e.tool.mac??""}`),w(O,e.tool.about)},[()=>Be(e.tool.apId)]),r(i,n),he()}var sa=z('<div class="grid gap-6 grid-cols-1 md:grid-cols-2 lg:grid-cols-3"></div>');function pa(i,e){ge(e,!1);const s=_e.client.convex.query(Ve.db.tool.getAll,{token:_e.client.token});He();var l=g(),n=c(l);Oe(n,()=>s,null,(d,a)=>{var o=sa();De(o,5,()=>p(a),Ee,(v,y)=>{ta(v,{get tool(){return p(y)}})}),m(o),r(d,o)}),r(i,l),he()}export{pa as component};
